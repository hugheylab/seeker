---
title: "Introduction to seeker"
author: "Jake Hughey"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Introduction to seeker}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(collapse = TRUE, comment = '#>')
```

## RNA-seq data

The `seeker` package is designed to be a wrapper around various command-line and R-based tools. The main function in the `seeker` package is, well, `seeker()`. Currently `seeker()` is targeted at processing bulk RNA-seq data. The main input is a list of parameters specifying which steps of RNA-seq data processing to perform and how to perform them. Depending on the parameters, `seeker()` will call other functions in the package.

A convenient way to construct the list of parameters is to make a yaml file and read it into R using `yaml::read_yaml()`. A template yaml file is shown below.

```{r, code = readLines(system.file('extdata', 'params_template.yml', package = 'seeker')), eval = FALSE}
```

A convenient way to run `seeker()` is then using a script such as the one below.

```{r, code = readLines(system.file('extdata', 'run_seeker.R', package = 'seeker')), eval = FALSE}
```

You can copy the template yaml file and script to your current working directory like so:

```{r, eval = FALSE}
for (filename in c('params_template.yml', 'run_seeker.R')) {
  file.copy(system.file('extdata', filename, package = 'seeker'), '.')}
```

Then you can rename and edit the yaml file, edit the script as appropriate, run `install.packages('doParallel')` if necessary, and run the script using something like

```{sh, eval = FALSE}
Rscript run_seeker.R <study>.yml <path/to/parent/directory>
```

## Microarray data

To process microarray data, use the `seekerArray()` function. Currently `seekerArray()` can process data from [NCBI GEO](https://www.ncbi.nlm.nih.gov/geo/) and [ArrayExpress](https://www.ebi.ac.uk/arrayexpress/). It can also process raw Affymetrix data stored locally. The main input is again a list of parameters, but much simpler than for `seeker()`. A template yaml file for the parameters is shown below.

```{yaml, eval = FALSE}
study: '' # [string indicating study accession]
geneIdType: '' # [string 'ensembl' or 'entrez']
# platform: '' # [string indicating GEO-based platform accession for local data
# or for GEO-based data using multiple platforms]
```

A convenient way to run `seekerArray()` is then using a script such as the one below.

```{r, code = readLines(system.file('extdata', 'run_seeker_array.R', package = 'seeker')), eval = FALSE}
```

Copy the script to your working directory like so:

```{r, eval = FALSE}
file.copy(system.file('extdata', 'run_seeker_array.R', package = 'seeker'), '.')
```

Then you can create the yaml file for the dataset you want and run the script using something like

```{sh, eval = FALSE}
Rscript run_seeker_array.R <study>.yml <path/to/parent/directory>
```
